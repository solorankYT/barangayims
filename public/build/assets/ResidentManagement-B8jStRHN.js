import{K as S,r as o,j as e,S as h}from"./app-BUJ-Xs52.js";import{A as T}from"./AuthenticatedLayout-cLHCBzW-.js";import{B as A,I as g}from"./index-DhyXgqfG.js";import{T as t,D,a as I,b as W,S as E,c as z}from"./TextField-DtEF5oPB.js";import{I as R,S as B}from"./Search-CPsxp5Z_.js";import{B as m,P as M,T as u}from"./Menu-BBYLuhnE.js";import{A as N,E as P,D as k}from"./Edit-B-_es7x1.js";import{T as L,a as O,b as F,c as x,d as s,e as H}from"./TableRow-XQUvRJBl.js";import{M as c}from"./MenuItem-DcNJRPM_.js";import"./useControlled-dll_wIeD.js";import"./index-Bim1y6ZO.js";import"./Report-DqM0_vN-.js";const ae=()=>{const{residents:y}=S().props,[f,j]=o.useState(!1),[d,v]=o.useState(""),[n,r]=o.useState({id:"",name:"",birthday:"",gender:"",email:"",contact_number:"",address:"",city:"",state:"",zip_code:"",household_number:"",password:""}),[l,C]=o.useState(!1),b=(a=null)=>{C(!!a),r(a?{id:a.id,name:a.name,birthday:a.birthday?a.birthday.split("T")[0]:"",gender:a.gender,email:a.email,contact_number:a.contact_number,address:a.address,city:a.city,state:a.state,zip_code:a.zip_code,household_number:a.household_number,password:""}:{id:"",name:"",birthday:"",gender:"",email:"",contact_number:"",address:"",city:"",state:"",zip_code:"",household_number:"",password:""}),j(!0)},i=()=>{j(!1),r({id:"",name:"",birthday:"",gender:"",email:"",contact_number:"",address:"",city:"",state:"",zip_code:"",household_number:"",password:""})},_=()=>{const a={...n,birthday:n.birthday?n.birthday.split("T")[0]:""};if(!l&&!a.password){alert("Password is required for new residents.");return}l?(delete a.password,h.put(`/residentmanagement/${n.id}`,a,{onSuccess:()=>i()})):h.post("/residentmanagement",a,{onSuccess:()=>i()})},w=a=>{window.confirm("Are you sure you want to delete this resident?")&&h.delete(`/residentmanagement/${a}`)},p=y.filter(a=>a.name.toLowerCase().includes(d.toLowerCase())||a.email.toLowerCase().includes(d.toLowerCase())||a.contact_number.includes(d));return e.jsx(T,{header:"Resident Management",children:e.jsxs(A,{sx:{width:"100%",padding:3},children:[e.jsx(t,{variant:"outlined",placeholder:"Search by Name, Email, or Contact",fullWidth:!0,value:d,onChange:a=>v(a.target.value),sx:{mb:2},InputProps:{startAdornment:e.jsx(R,{position:"start",children:e.jsx(B,{})})}}),e.jsx(m,{variant:"contained",color:"primary",startIcon:e.jsx(N,{}),onClick:()=>b(),sx:{mb:2},children:"Add Resident"}),e.jsx(L,{component:M,children:e.jsxs(O,{children:[e.jsx(F,{children:e.jsxs(x,{children:[e.jsx(s,{children:e.jsx("b",{children:"ID"})}),e.jsx(s,{children:e.jsx("b",{children:"Name"})}),e.jsx(s,{children:e.jsx("b",{children:"Birthday"})}),e.jsx(s,{children:e.jsx("b",{children:"Gender"})}),e.jsx(s,{children:e.jsx("b",{children:"Email"})}),e.jsx(s,{children:e.jsx("b",{children:"Contact"})}),e.jsx(s,{children:e.jsx("b",{children:"Address"})}),e.jsx(s,{children:e.jsx("b",{children:"City"})}),e.jsx(s,{children:e.jsx("b",{children:"State"})}),e.jsx(s,{children:e.jsx("b",{children:"Zip Code"})}),e.jsx(s,{children:e.jsx("b",{children:"Household #"})}),e.jsx(s,{children:e.jsx("b",{children:"Actions"})})]})}),e.jsx(H,{children:p.length>0?p.map(a=>e.jsxs(x,{children:[e.jsx(s,{children:a.id}),e.jsx(s,{children:a.name}),e.jsx(s,{children:a.birthday}),e.jsx(s,{children:a.gender}),e.jsx(s,{children:a.email}),e.jsx(s,{children:a.contact_number}),e.jsx(s,{children:a.address}),e.jsx(s,{children:a.city}),e.jsx(s,{children:a.state}),e.jsx(s,{children:a.zip_code}),e.jsx(s,{children:a.household_number}),e.jsxs(s,{children:[e.jsx(g,{onClick:()=>b(a),color:"primary",children:e.jsx(P,{})}),e.jsx(g,{onClick:()=>w(a.id),color:"error",children:e.jsx(k,{})})]})]},a.id)):e.jsx(x,{children:e.jsx(s,{colSpan:12,align:"center",children:"No residents found."})})})]})}),e.jsxs(D,{open:f,onClose:i,children:[e.jsx(I,{children:l?"Edit Resident":"Add Resident"}),e.jsxs(W,{children:[e.jsx(u,{variant:"h6",children:"Personal Information"}),e.jsx(t,{label:"Name",name:"name",fullWidth:!0,margin:"dense",value:n.name,onChange:a=>r({...n,name:a.target.value})}),e.jsx(t,{label:"Birthday",name:"birthday",type:"date",fullWidth:!0,margin:"dense",value:n.birthday,onChange:a=>r({...n,birthday:a.target.value})}),e.jsxs(E,{fullWidth:!0,displayEmpty:!0,value:n.gender,onChange:a=>r({...n,gender:a.target.value}),sx:{mt:1},children:[e.jsx(c,{value:"",children:"Select Gender"}),e.jsx(c,{value:"Male",children:"Male"}),e.jsx(c,{value:"Female",children:"Female"}),e.jsx(c,{value:"Other",children:"Other"})]}),e.jsx(t,{label:"Contact Number",name:"contact_number",fullWidth:!0,margin:"dense",value:n.contact_number,onChange:a=>r({...n,contact_number:a.target.value})}),e.jsx(u,{variant:"h6",children:"Address Information"}),e.jsx(t,{label:"Address",name:"address",fullWidth:!0,margin:"dense",value:n.address,onChange:a=>r({...n,address:a.target.value})}),e.jsx(t,{label:"City",name:"city",fullWidth:!0,margin:"dense",value:n.city,onChange:a=>r({...n,city:a.target.value})}),e.jsx(t,{label:"State",name:"state",fullWidth:!0,margin:"dense",value:n.state,onChange:a=>r({...n,state:a.target.value})}),e.jsx(t,{label:"Zip Code",name:"zip_code",fullWidth:!0,margin:"dense",value:n.zip_code,onChange:a=>r({...n,zip_code:a.target.value})}),e.jsx(t,{label:"Household Number",name:"household_number",fullWidth:!0,margin:"dense",value:n.household_number,onChange:a=>r({...n,household_number:a.target.value})}),e.jsx(u,{variant:"h6",children:"Account Information"}),e.jsx(t,{label:"Email",name:"email",type:"email",fullWidth:!0,margin:"dense",value:n.email,onChange:a=>r({...n,email:a.target.value})}),!l&&e.jsx(t,{label:"Password",name:"password",type:"password",fullWidth:!0,margin:"dense",value:n.password,onChange:a=>r({...n,password:a.target.value})})]}),e.jsxs(z,{children:[e.jsx(m,{onClick:i,color:"secondary",children:"Cancel"}),e.jsx(m,{onClick:_,color:"primary",children:l?"Update":"Save"})]})]})]})})};export{ae as default};
