import{K as T,r as d,j as e,S as u}from"./app-BUJ-Xs52.js";import{A as y}from"./AuthenticatedLayout-cLHCBzW-.js";import{B as v,I as g}from"./index-DhyXgqfG.js";import{B as h,P as k}from"./Menu-BBYLuhnE.js";import{A as R,E as q,D as S}from"./Edit-B-_es7x1.js";import{T as A,a as B,b as w,c as p,d as s,e as E}from"./TableRow-XQUvRJBl.js";import{D as P,a as U,b as O,T as l,c as W}from"./TextField-DtEF5oPB.js";import{A as F}from"./Autocomplete-HL6gNpe-.js";import{M as a}from"./MenuItem-DcNJRPM_.js";import"./useControlled-dll_wIeD.js";import"./index-Bim1y6ZO.js";import"./Report-DqM0_vN-.js";import"./Autocomplete-BLYPNwWp.js";import"./Close-BEU_eJTi.js";const V=()=>{const{certificateRequests:x=[],users:f=[]}=T().props,[C,m]=d.useState(!1),[c,D]=d.useState(!1),[r,i]=d.useState({certificateRequestID:null,userID:null,certificateType:"",status:"",purpose:"",remarks:"",certificateID:null}),j=(t=null)=>{D(!!t),i(t?{...t}:{certificateRequestID:null,userID:null,certificateType:"",status:"",purpose:"",remarks:"",certificateID:null}),m(!0)},o=()=>{m(!1),i({certificateRequestID:null,userID:null,certificateType:"",status:"",purpose:"",remarks:"",certificateID:null})},I=()=>{if(!r.userID||!r.certificateType){alert("User and Certificate Type are required.");return}const t={...r,certificateID:null};c?u.put(`/admincertificate/${r.certificateRequestID}`,t,{onSuccess:()=>o()}):u.post("/admincertificate",t,{onSuccess:()=>o()})},b=t=>{window.confirm("Are you sure you want to delete this certificate request?")&&u.delete(`/admincertificate/${t}`)};return e.jsx(y,{header:"Certificate Requests",children:e.jsxs(v,{sx:{width:"100%",padding:3},children:[e.jsx(h,{variant:"contained",color:"primary",startIcon:e.jsx(R,{}),onClick:()=>j(),sx:{mb:2},children:"Add New Request"}),e.jsx(A,{component:k,children:e.jsxs(B,{children:[e.jsx(w,{children:e.jsxs(p,{children:[e.jsx(s,{children:e.jsx("b",{children:"ID"})}),e.jsx(s,{children:e.jsx("b",{children:"User"})}),e.jsx(s,{children:e.jsx("b",{children:"Certificate Type"})}),e.jsx(s,{children:e.jsx("b",{children:"Status"})}),e.jsx(s,{children:e.jsx("b",{children:"Purpose"})}),e.jsx(s,{children:e.jsx("b",{children:"Remarks"})}),e.jsx(s,{children:e.jsx("b",{children:"Actions"})})]})}),e.jsx(E,{children:x.length>0?x.map(t=>{var n;return e.jsxs(p,{children:[e.jsx(s,{children:t.certificateRequestID}),e.jsx(s,{children:((n=t.user)==null?void 0:n.name)||"Unknown User"}),e.jsx(s,{children:t.certificateType}),e.jsx(s,{children:t.status}),e.jsx(s,{children:t.purpose}),e.jsx(s,{children:t.remarks}),e.jsxs(s,{children:[e.jsx(g,{onClick:()=>j(t),color:"primary",children:e.jsx(q,{})}),e.jsx(g,{onClick:()=>b(t.certificateRequestID),color:"error",children:e.jsx(S,{})})]})]},t.certificateRequestID)}):e.jsx(p,{children:e.jsx(s,{colSpan:7,align:"center",children:"No certificate requests found."})})})]})}),e.jsxs(P,{open:C,onClose:o,children:[e.jsx(U,{children:c?"Edit Certificate Request":"New Certificate Request"}),e.jsxs(O,{children:[e.jsx(F,{options:f,getOptionLabel:t=>t.name||"",value:f.find(t=>t.id===r.userID)||null,onChange:(t,n)=>{i({...r,userID:n?n.id:null})},renderInput:t=>e.jsx(l,{...t,label:"User",fullWidth:!0,margin:"dense"})}),e.jsxs(l,{select:!0,label:"Certificate Type",fullWidth:!0,margin:"dense",value:r.certificateType,onChange:t=>i({...r,certificateType:t.target.value}),children:[e.jsx(a,{value:"Barangay Clearance",children:"Barangay Clearance"}),e.jsx(a,{value:"Certificate of Indigency",children:"Certificate of Indigency"}),e.jsx(a,{value:"First-Time Job Seeker Certificate",children:"First-Time Job Seeker Certificate"})]}),c&&e.jsxs(l,{select:!0,label:"Status",fullWidth:!0,margin:"dense",name:"status",value:r.status,onChange:t=>i({...r,status:t.target.value}),children:[e.jsx(a,{value:"Pending",children:"Pending"}),e.jsx(a,{value:"Ongoing",children:"Ongoing"}),e.jsx(a,{value:"Completed",children:"Completed"})]}),e.jsx(l,{label:"Purpose",fullWidth:!0,margin:"dense",name:"purpose",value:r.purpose,onChange:t=>i({...r,purpose:t.target.value})}),e.jsx(l,{label:"Remarks",fullWidth:!0,margin:"dense",name:"remarks",value:r.remarks,onChange:t=>i({...r,remarks:t.target.value})})]}),e.jsxs(W,{children:[e.jsx(h,{onClick:o,color:"secondary",children:"Cancel"}),e.jsx(h,{onClick:I,color:"primary",children:c?"Update":"Save"})]})]})]})})};export{V as default};
